{% extends "base.html" %}

{% block content %}
    <h1>編輯產品: {{ product.product_name }}</h1>
    <p><a href="{{ url_for('products.index') }}">&larr; 返回產品管理</a></p>

    <hr>
    
    <form action="" method="post" novalidate>
        {{ form.hidden_tag() }}
        {# 顯示關聯的食譜，並連結到食譜詳細頁面 #}
        <p>
            關聯食譜: <a href="{{ url_for('recipes.recipe_detail', recipe_id=product.recipe.id) }}">{{ product.recipe.recipe_name }}</a>
        </p>
        {# 顯示重新計算後的食譜總成本 #}
        <p>
            食譜總成本 (自動計算): <strong>NT$ {{ recalculated_cost | round(2) }}</strong>
        </p>
        <p>
            {{ form.product_name.label }}:<br>
            {{ form.product_name(size=64) }}<br>
            {% for error in form.product_name.errors %}<span style="color: red;">[{{ error }}]</span>{% endfor %}
        </p>
        <p>
            {{ form.description.label }}:<br>
            {{ form.description(cols=50, rows=4) }}<br>
            {% for error in form.description.errors %}<span style="color: red;">[{{ error }}]</span>{% endfor %}
        </p>
        <p>
            {{ form.selling_price.label }}:<br>
            {{ form.selling_price(size=16) }}<br>
            {% for error in form.selling_price.errors %}<span style="color: red;">[{{ error }}]</span>{% endfor %}
        </p>
        <p>
            {{ form.stock_quantity.label }}:<br>
            {{ form.stock_quantity(size=16) }}<br>
            {% for error in form.stock_quantity.errors %}<span style="color: red;">[{{ error }}]</span>{% endfor %}
        </p>
        <p>{{ form.submit() }}</p>
    </form>
{% endblock %}